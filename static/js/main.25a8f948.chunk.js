(this.webpackJsonpoptimaxdev_cart=this.webpackJsonpoptimaxdev_cart||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a,c=n(2),r=n.n(c),i=n(13),s=n.n(i),u=(n(28),n(29),n(30),n(31),n(1)),d=function(e){var t=e.title,n=e.children;return Object(u.jsx)("div",{className:"page",children:Object(u.jsxs)("div",{className:"page__inside",children:[Object(u.jsx)("header",{className:"header",children:Object(u.jsx)("h1",{className:"header__title",children:t})}),Object(u.jsx)("main",{className:"main",children:n}),Object(u.jsx)("footer",{className:"footer"})]})})},l=(n(33),n(34),function(e){var t=e.quantity,n=e.decrementQuantity,a=e.incrementQuantity;return Object(u.jsxs)("div",{className:"quantity-switcher",children:[Object(u.jsx)("button",{type:"button",className:"quantity-switcher__btn btn btn_small",onClick:n,disabled:t<=1,children:"-"}),Object(u.jsx)("div",{className:"quantity-switcher__current","data-testid":"quantity-current",children:t}),Object(u.jsx)("button",{type:"button",className:"quantity-switcher__btn btn btn_small",onClick:a,children:"+"})]})}),o=function(e){var t=e.item,n=e.deleteItem,a=e.decrementQuantity,c=e.incrementQuantity;return Object(u.jsx)("div",{className:"cart-item","data-testid":"cart-item",children:Object(u.jsxs)("div",{className:"cart-item__body",children:[Object(u.jsxs)("div",{className:"cart-item__content",children:[Object(u.jsx)("h2",{className:"cart-item__name",children:t.name}),Object(u.jsx)(j,{price:t.price,quantity:t.quantity})]}),Object(u.jsxs)("div",{className:"cart-item__actions",children:[Object(u.jsx)("button",{"data-testid":"delete-btn",type:"button",className:"cart-item__delete-btn btn btn_small",onClick:n}),Object(u.jsx)(l,{quantity:t.quantity,decrementQuantity:a,incrementQuantity:c})]})]})})},j=function(e){var t=e.quantity,n=e.price;return Object(u.jsxs)("div",{className:"cart-item__price",children:[Object(u.jsx)("div",{className:"cart-item__fullprice",children:(n*t).toLocaleString("en-US",{style:"currency",currency:"USD"})}),t>1&&Object(u.jsxs)("div",{className:"cart-item__price-for-one",children:[n.toLocaleString("en-US",{style:"currency",currency:"USD"})," \xd7 ",t]})]})},b=n(11);!function(e){e.GET_ITEMS_REQUEST="GET_ITEMS_REQUEST",e.GET_ITEMS_SUCCESS="GET_ITEMS_SUCCESS",e.GET_ITEMS_ERROR="GET_ITEMS_ERROR",e.OPEN_ADD_FORM="OPEN_ADD_FORM",e.CLOSE_ADD_FORM="CLOSE_ADD_FORM",e.ADD_ITEM="ADD_ITEM",e.DELETE_ITEM="DELETE_ITEM",e.INCREMENT_QUANTITY="INCREMENT_QUANTITY",e.DECREMENT_QUANTITY="DECREMENT_QUANTITY"}(a||(a={}));var m=function(e){return{type:a.GET_ITEMS_SUCCESS,payload:e}},O=n(15),_=n(5),p=n(20),E=(n(39),n(40),function(e){var t=e.label,n=e.children,a=e.error;return Object(u.jsxs)("div",{className:"field"+(a?" field_error":""),children:[Object(u.jsx)("label",{className:"field__label",children:t}),n,a&&Object(u.jsx)(h,{message:a})]})}),h=function(e){var t=e.message;return Object(u.jsx)("div",{className:"error",children:t})},f=function(e){var t=e.addItem,n=Object(c.useState)({name:"",price:"",quantity:1}),a=Object(p.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)({}),d=Object(p.a)(s,2),l=d[0],o=d[1],j=function(e,t){if(0===String(t).trim().length)return"This field is required";switch(e){case"quantity":if(t<1)return"This field should be greater or equal then 1";break;case"price":if(t<=0)return"This field should be greater then 0"}return!1},b=function(e){i(Object(_.a)(Object(_.a)({},r),{},Object(O.a)({},e.target.name,e.target.value)))};return Object(u.jsxs)("div",{className:"new-item-form","data-testid":"form",children:[Object(u.jsx)("h2",{className:"new-item-form__title",children:"Add New Cart Item"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=function(e){var t,n={};for(t in e){var a=j(t,e[t]);!1!==a&&(n[t]=a)}return n}(r);o(n),0===Object.keys(n).length&&t({name:r.name,price:Number(r.price),quantity:Math.floor(r.quantity)})},noValidate:!0,children:[Object(u.jsx)(E,{label:"Name",error:null===l||void 0===l?void 0:l.name,children:Object(u.jsx)("input",{className:"input",type:"text",name:"name",onChange:b,value:r.name,"data-testid":"input-name",required:!0})}),Object(u.jsx)(E,{label:"Price",error:null===l||void 0===l?void 0:l.price,children:Object(u.jsx)("input",{className:"input",type:"number",name:"price",onChange:b,value:r.price,"data-testid":"input-price",min:.01,step:.01,required:!0})}),Object(u.jsx)(E,{label:"Quantity",error:null===l||void 0===l?void 0:l.quantity,children:Object(u.jsx)("input",{className:"input",type:"number",name:"quantity",onChange:b,value:r.quantity,min:1,required:!0,"data-testid":"input-quantity"})}),Object(u.jsx)("div",{className:"new-item-form__btns",children:Object(u.jsx)("button",{className:"btn btn_primary",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})})]})]})},y=(n(41),function(e){var t=e.close,n=e.children;return Object(u.jsx)("div",{className:"modal",onClick:t,"data-testid":"modal",children:Object(u.jsxs)("div",{className:"modal__inside",onClick:function(e){e.stopPropagation()},"data-testid":"modal-inside",children:[Object(u.jsx)("button",{className:"modal__close-btn btn btn_small",onClick:t,children:"\u2715"}),n]})})}),T=function(){var e=Object(b.c)((function(e){return e.cart})),t=Object(b.b)();return Object(c.useEffect)((function(){t({type:a.GET_ITEMS_REQUEST})}),[t]),Object(u.jsx)(d,{title:"Shopping cart",children:e.isLoading?Object(u.jsx)("div",{"data-testid":"loading",children:"Loading..."}):Object(u.jsxs)("div",{className:"cart","data-testid":"cart",children:[Object(u.jsx)("div",{className:"cart__bar",children:Object(u.jsx)("button",{className:"btn btn_primary",onClick:function(){return t({type:a.OPEN_ADD_FORM})},children:"Add Cart Item"})}),Object(u.jsx)("div",{className:"cart__list",children:e.items.length>0?e.items.map((function(e){return Object(u.jsx)(o,{item:e,incrementQuantity:function(){return t((n=e.id,{type:a.INCREMENT_QUANTITY,payload:n}));var n},decrementQuantity:function(){return t((n=e.id,{type:a.DECREMENT_QUANTITY,payload:n}));var n},deleteItem:function(){return t((n=e.id,{type:a.DELETE_ITEM,payload:n}));var n}},e.id)})):Object(u.jsx)("span",{children:"Cart is empty"})}),e.openAddForm&&Object(u.jsx)(y,{close:function(){return t({type:a.CLOSE_ADD_FORM})},children:Object(u.jsx)(f,{addItem:function(e){return t(function(e){return{type:a.ADD_ITEM,payload:e}}(e))}})})]})})};var x=function(){return Object(u.jsx)(T,{})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},N=n(23),S=n(9),I=n(22),M={isLoading:!0,openAddForm:!1,items:[]},C=function(e){return e.reduce((function(e,t){return e<t.id?t.id:e}),0)+1},D=Object(S.b)({cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.GET_ITEMS_SUCCESS:return Object(_.a)(Object(_.a)({},e),{},{items:t.payload,isLoading:!1});case a.GET_ITEMS_ERROR:return Object(_.a)(Object(_.a)({},e),{},{items:[],isLoading:!1});case a.OPEN_ADD_FORM:return Object(_.a)(Object(_.a)({},e),{},{openAddForm:!0});case a.CLOSE_ADD_FORM:return Object(_.a)(Object(_.a)({},e),{},{openAddForm:!1});case a.ADD_ITEM:return Object(_.a)(Object(_.a)({},e),{},{items:[Object(_.a)(Object(_.a)({},t.payload),{},{id:C(e.items)})].concat(Object(I.a)(e.items)),openAddForm:!1});case a.INCREMENT_QUANTITY:return Object(_.a)(Object(_.a)({},e),{},{items:e.items.map((function(e){return e.id===t.payload&&(e.quantity=e.quantity+1),e}))});case a.DECREMENT_QUANTITY:return Object(_.a)(Object(_.a)({},e),{},{items:e.items.map((function(e){return e.id===t.payload&&e.quantity>1&&(e.quantity=e.quantity-1),e}))});case a.DELETE_ITEM:return Object(_.a)(Object(_.a)({},e),{},{items:e.items.filter((function(e){return e.id!==t.payload}))});default:return e}}}),g=n(8),R=n.n(g),q=n(12),A=n(21),Q=function(){var e=Object(A.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/cart.json").then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=R.a.mark(F),w=R.a.mark(L);function F(){var e;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(q.a)(Q);case 3:return e=t.sent,t.next=6,Object(q.b)(m(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(q.b)({type:a.GET_ITEMS_ERROR});case 12:case"end":return t.stop()}}),U,null,[[0,8]])}function L(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.c)(a.GET_ITEMS_REQUEST,F);case 2:case"end":return e.stop()}}),w)}var k=Object(N.a)(),G=Object(S.d)(D,Object(S.a)(k));k.run(L),s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(b.a,{store:G,children:Object(u.jsx)(x,{})})}),document.getElementById("root")),v()}},[[43,1,2]]]);
//# sourceMappingURL=main.25a8f948.chunk.js.map